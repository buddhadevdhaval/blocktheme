(()=>{"use strict";const e=window.wp.blocks,n=JSON.parse('{"UU":"ambrygen/mega-menu-patients"}'),i=window.wp.i18n,t=window.wp.blockEditor,s=window.wp.components,a=window.wp.primitives,l=window.ReactJSXRuntime;var m=(0,l.jsx)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)(a.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),r=(0,l.jsx)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)(a.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),o=(0,l.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(a.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),c=(0,l.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(a.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})}),d=(0,l.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,l.jsx)(a.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});(0,e.registerBlockType)(n.UU,{edit:function({attributes:e,setAttributes:n}){const{items:a}=e,u=(0,t.useBlockProps)({className:"nav__item--mega-menu__grid"}),g=(e,i,t)=>{const s=[...a];s[e]={...s[e],[i]:t},n({items:s})},x=(e,i,t,s)=>{const l=[...a],m=l[e],r=[...m.submenuLinks];r[i]={...r[i],[t]:s},l[e]={...m,submenuLinks:r},n({items:l})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.InspectorControls,{children:(0,l.jsxs)(s.PanelBody,{title:(0,i.__)("Menu Items","ambrygen-web"),initialOpen:!0,children:[(0,l.jsx)("p",{className:"components-base-control__help",style:{marginBottom:"12px"},children:(0,i.__)(`Manage up to 3 menu items. Current: ${a.length}/3`,"ambrygen-web")}),a.map((e,d)=>(0,l.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",background:"#f0f0f0",borderRadius:"4px"},children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,l.jsxs)("strong",{children:[(0,i.__)("Item","ambrygen-web")," ",d+1,":"," ",e.title||(0,i.__)("Untitled","ambrygen-web")]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,l.jsx)(s.Button,{icon:m,size:"small",disabled:0===d,onClick:()=>(e=>{if(0===e)return;const i=[...a];[i[e-1],i[e]]=[i[e],i[e-1]],n({items:i})})(d),label:(0,i.__)("Move Up","ambrygen-web")}),(0,l.jsx)(s.Button,{icon:r,size:"small",disabled:d>=a.length-1,onClick:()=>(e=>{if(e>=a.length-1)return;const i=[...a];[i[e],i[e+1]]=[i[e+1],i[e]],n({items:i})})(d),label:(0,i.__)("Move Down","ambrygen-web")}),(0,l.jsx)(s.Button,{icon:o,size:"small",isDestructive:!0,disabled:a.length<=1,onClick:()=>(e=>{if(a.length<=1)return;const i=a.filter((n,i)=>i!==e);n({items:i})})(d),label:(0,i.__)("Remove Item","ambrygen-web")})]})]}),(0,l.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,l.jsx)("p",{style:{marginBottom:"4px",fontWeight:"500"},children:(0,i.__)("Image","ambrygen-web")}),e.image?(0,l.jsxs)("div",{children:[(0,l.jsx)("img",{src:e.image,alt:"",style:{maxWidth:"100%",height:"auto",marginBottom:"8px",borderRadius:"4px"}}),(0,l.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,l.jsx)(t.MediaUploadCheck,{children:(0,l.jsx)(t.MediaUpload,{onSelect:e=>{const i=[...a];i[d]={...i[d],image:e.url,imageId:e.id},n({items:i})},allowedTypes:["image"],render:({open:e})=>(0,l.jsx)(s.Button,{variant:"secondary",size:"small",onClick:e,children:(0,i.__)("Replace","ambrygen-web")})})}),(0,l.jsx)(s.Button,{variant:"secondary",size:"small",isDestructive:!0,onClick:()=>{const e=[...a];e[d]={...e[d],image:"",imageId:0},n({items:e})},children:(0,i.__)("Remove","ambrygen-web")})]})]}):(0,l.jsx)(t.MediaUploadCheck,{children:(0,l.jsx)(t.MediaUpload,{onSelect:e=>{const i=[...a];i[d]={...i[d],image:e.url,imageId:e.id},n({items:i})},allowedTypes:["image"],render:({open:e})=>(0,l.jsx)(s.Button,{variant:"secondary",icon:c,onClick:e,children:(0,i.__)("Upload Image","ambrygen-web")})})})]}),(0,l.jsx)(s.TextControl,{label:(0,i.__)("Title","ambrygen-web"),value:e.title,onChange:e=>g(d,"title",e)}),(0,l.jsx)(s.TextControl,{label:(0,i.__)("URL","ambrygen-web"),value:e.url,onChange:e=>g(d,"url",e)}),(0,l.jsx)(s.TextControl,{label:(0,i.__)("Description","ambrygen-web"),value:e.text,onChange:e=>g(d,"text",e)}),d<a.length-1&&(0,l.jsx)(s.CardDivider,{})]},d)),a.length<3&&(0,l.jsx)(s.Button,{variant:"primary",icon:d,onClick:()=>{if(a.length>=3)return;const e={image:"",imageId:0,title:(0,i.__)("New Item","ambrygen-web"),url:"#",text:(0,i.__)("Description here","ambrygen-web"),hasSubmenu:!1,submenuTitle:"",submenuLinks:[]};n({items:[...a,e]})},style:{width:"100%",justifyContent:"center"},children:(0,i.__)("Add Item","ambrygen-web")})]})}),(0,l.jsx)("div",{...u,children:a.map((e,m)=>(0,l.jsxs)("div",{className:"nav__item--mega-menu__item",children:[(0,l.jsxs)("div",{className:"nav__item--mega-menu__col",children:[(0,l.jsx)("figure",{className:"nav__item--mega-menu__image",children:e.image?(0,l.jsx)("img",{src:e.image,alt:""}):(0,l.jsx)("span",{style:{color:"#999",fontSize:"12px",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100px",background:"#f0f0f0"},children:(0,i.__)("No image set","ambrygen-web")})}),(0,l.jsx)("div",{className:"nav__item--mega-menu__links",children:(0,l.jsx)(t.RichText,{tagName:"p",className:"body2-medium mb-0 nav__item--mega-menu__link-title",value:e.title,onChange:e=>g(m,"title",e),placeholder:(0,i.__)("Title","ambrygen-web")})}),(0,l.jsx)(t.RichText,{tagName:"p",className:"nav__item--mega-menu__info caption-regular",value:e.text,onChange:e=>g(m,"text",e),placeholder:(0,i.__)("Description","ambrygen-web")})]}),e.hasSubmenu?(0,l.jsx)("div",{className:"nav__item--mega-menu__submenu-inner",children:(0,l.jsxs)("div",{className:"nav__item--mega-menu__submenu-inner--col",children:[(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)(t.RichText,{tagName:"p",className:"nav__item--mega-menu__submenu-inner--title caption-semi-bold",value:e.submenuTitle,onChange:e=>g(m,"submenuTitle",e),placeholder:(0,i.__)("Submenu Title","ambrygen-web")}),(0,l.jsx)(s.Button,{icon:o,isSmall:!0,isDestructive:!0,onClick:()=>g(m,"hasSubmenu",!1),label:(0,i.__)("Remove Section","ambrygen-web")})]}),(0,l.jsx)("ul",{className:"nav__item--mega-menu__submenu-inner--links",children:e.submenuLinks.map((e,r)=>(0,l.jsxs)("li",{className:"nav__item--mega-menu__submenu-inner--link-wrapper",style:{position:"relative"},children:[(0,l.jsxs)("a",{href:e.url,className:"nav__item--mega-menu__submenu-inner--link",onClick:e=>e.preventDefault(),children:[(0,l.jsx)("div",{className:"nav__item--mega-menu__submenu-inner--icon",children:(0,l.jsx)(t.MediaUploadCheck,{children:(0,l.jsx)(t.MediaUpload,{onSelect:e=>x(m,r,"icon",e.url),allowedTypes:["image"],render:({open:n})=>(0,l.jsx)("div",{onClick:n,style:{cursor:"pointer",width:"24px",height:"24px",background:e.icon?"transparent":"#eee"},children:e.icon&&(0,l.jsx)("img",{src:e.icon,alt:""})})})})}),(0,l.jsx)(t.RichText,{tagName:"div",className:"nav__item--mega-menu__submenu-inner--link-title body2-medium",value:e.label,onChange:e=>x(m,r,"label",e)})]}),(0,l.jsx)("div",{style:{marginTop:"5px"},children:(0,l.jsx)(s.TextControl,{value:e.url,onChange:e=>x(m,r,"url",e),placeholder:(0,i.__)("Paste Link URL","ambrygen-web")})}),(0,l.jsx)(s.Tooltip,{text:"Remove Link",children:(0,l.jsx)(s.Button,{icon:o,onClick:()=>((e,i)=>{const t=[...a],s=t[e];t[e]={...s,submenuLinks:s.submenuLinks.filter((e,n)=>n!==i)},n({items:t})})(m,r),className:"remove-link-btn",style:{position:"absolute",right:-30,top:5,color:"red"}})})]},r))}),(0,l.jsx)(s.Button,{variant:"secondary",icon:d,onClick:()=>(e=>{const i=[...a],t=i[e];i[e]={...t,submenuLinks:[...t.submenuLinks,{label:"New Link",url:"#",icon:""}]},n({items:i})})(m),children:(0,i.__)("Add Link","ambrygen-web")})]})}):(0,l.jsx)("div",{style:{padding:"10px 0"},children:(0,l.jsx)(s.Button,{variant:"secondary",onClick:()=>g(m,"hasSubmenu",!0),style:{width:"100%",justifyContent:"center"},children:(0,i.__)("Add Submenu (Links)","ambrygen-web")})})]},m))})]})},save:()=>null})})();