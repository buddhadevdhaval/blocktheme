(()=>{"use strict";const e=window.wp.blocks,n=JSON.parse('{"UU":"ambrygen/mega-menu-solutions"}'),i=window.wp.i18n,t=window.wp.blockEditor,l=window.wp.components,a=window.wp.primitives,s=window.ReactJSXRuntime;var o=(0,s.jsx)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)(a.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),r=(0,s.jsx)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)(a.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),m=(0,s.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(a.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),c=(0,s.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(a.Path,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"})}),d=(0,s.jsx)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,s.jsx)(a.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})});const g=window.wp.element;(0,e.registerBlockType)(n.UU,{edit:function({attributes:e,setAttributes:n}){const{leftTitle:a,items:h}=e,[u,x]=(0,g.useState)(0),_=(0,t.useBlockProps)({className:"nav__item--mega-menu__grid nav__item--mega-menu__second-level"}),p=(e,i,t)=>{const l=[...h];l[e]={...l[e],[i]:t},n({items:l})},b=()=>{n({items:[...h,{label:"New Solution",url:"#",icon:"",image:"",imageId:0,rightTitle:"New Solution Title",rightText:"Description",rightUrl:"#"}]}),x(h.length)},v=e=>{if(h.length<=1)return;const i=h.filter((n,i)=>i!==e);n({items:i}),u>=i.length&&x(Math.max(0,i.length-1))},w=h[u]||{};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.InspectorControls,{children:(0,s.jsxs)(l.PanelBody,{title:(0,i.__)("Solution Items","ambrygen-web"),initialOpen:!0,children:[(0,s.jsx)("p",{className:"components-base-control__help",style:{marginBottom:"12px"},children:(0,i.__)(`Manage solution items. Current: ${h.length} items`,"ambrygen-web")}),h.map((e,a)=>(0,s.jsxs)("div",{id:`mega-menu-solutions-item-${a}`,style:{marginBottom:"16px",padding:"12px",background:u===a?"#e0e7ff":"#f0f0f0",borderRadius:"4px",cursor:"pointer"},onClick:()=>x(a),children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,s.jsxs)("strong",{children:[(0,i.__)("Item","ambrygen-web")," ",a+1,":"," ",e.label||(0,i.__)("Untitled","ambrygen-web")]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,s.jsx)(l.Button,{icon:o,size:"small",disabled:0===a,onClick:e=>{e.stopPropagation(),(e=>{if(0===e)return;const i=[...h];[i[e-1],i[e]]=[i[e],i[e-1]],n({items:i}),u===e?x(e-1):u===e-1&&x(e)})(a)},label:(0,i.__)("Move Up","ambrygen-web")}),(0,s.jsx)(l.Button,{icon:r,size:"small",disabled:a>=h.length-1,onClick:e=>{e.stopPropagation(),(e=>{if(e>=h.length-1)return;const i=[...h];[i[e],i[e+1]]=[i[e+1],i[e]],n({items:i}),u===e?x(e+1):u===e+1&&x(e)})(a)},label:(0,i.__)("Move Down","ambrygen-web")}),(0,s.jsx)(l.Button,{icon:m,size:"small",isDestructive:!0,disabled:h.length<=1,onClick:e=>{e.stopPropagation(),v(a)},label:(0,i.__)("Remove Item","ambrygen-web")})]})]}),(0,s.jsxs)("div",{style:{marginBottom:"8px"},children:[(0,s.jsx)("p",{style:{marginBottom:"4px",fontWeight:"500"},children:(0,i.__)("Right Side Image","ambrygen-web")}),e.image?(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:e.image,alt:"",style:{maxWidth:"100%",height:"auto",marginBottom:"8px",borderRadius:"4px"}}),(0,s.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,s.jsx)(t.MediaUploadCheck,{children:(0,s.jsx)(t.MediaUpload,{onSelect:e=>{const i=[...h];i[a]={...i[a],image:e.url,imageId:e.id},n({items:i})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)(l.Button,{variant:"secondary",size:"small",onClick:n=>{n.stopPropagation(),e()},children:(0,i.__)("Replace","ambrygen-web")})})}),(0,s.jsx)(l.Button,{variant:"secondary",size:"small",isDestructive:!0,onClick:e=>{e.stopPropagation();const i=[...h];i[a]={...i[a],image:"",imageId:0},n({items:i})},children:(0,i.__)("Remove","ambrygen-web")})]})]}):(0,s.jsx)(t.MediaUploadCheck,{children:(0,s.jsx)(t.MediaUpload,{onSelect:e=>{const i=[...h];i[a]={...i[a],image:e.url,imageId:e.id},n({items:i})},allowedTypes:["image"],render:({open:e})=>(0,s.jsx)(l.Button,{variant:"secondary",icon:c,onClick:n=>{n.stopPropagation(),e()},children:(0,i.__)("Upload Image","ambrygen-web")})})})]}),(0,s.jsx)(l.TextControl,{label:(0,i.__)("Label","ambrygen-web"),value:e.label,onChange:e=>p(a,"label",e),onClick:e=>e.stopPropagation()}),(0,s.jsx)(l.TextControl,{label:(0,i.__)("URL","ambrygen-web"),value:e.url,onChange:e=>p(a,"url",e),onClick:e=>e.stopPropagation()}),(0,s.jsx)(l.TextControl,{label:(0,i.__)("Right Title","ambrygen-web"),value:e.rightTitle,onChange:e=>p(a,"rightTitle",e),onClick:e=>e.stopPropagation()}),(0,s.jsx)(l.TextControl,{label:(0,i.__)("Right URL","ambrygen-web"),value:e.rightUrl||"",onChange:e=>p(a,"rightUrl",e),onClick:e=>e.stopPropagation()}),a<h.length-1&&(0,s.jsx)(l.CardDivider,{})]},a)),(0,s.jsx)(l.Button,{variant:"primary",icon:d,onClick:b,style:{width:"100%",justifyContent:"center"},children:(0,i.__)("Add Item","ambrygen-web")})]})}),(0,s.jsxs)("div",{..._,children:[(0,s.jsx)("div",{className:"nav__item--mega-menu__cl-left",children:(0,s.jsx)("div",{className:"nav__item--mega-menu__submenu-inner nav__item--mega-menu__second-level--submenu-inner",children:(0,s.jsxs)("div",{className:"nav__item--mega-menu__submenu-inner--col",children:[(0,s.jsx)(t.RichText,{tagName:"p",className:"nav__item--mega-menu__submenu-inner--title caption-semi-bold",value:a,onChange:e=>n({leftTitle:e}),placeholder:(0,i.__)("Title","ambrygen-web")}),(0,s.jsx)("ul",{className:"nav__item--mega-menu__submenu-inner--links",children:h.map((e,n)=>(0,s.jsxs)("li",{style:{position:"relative",backgroundColor:u===n?"#f0f0f0":"transparent",borderRadius:"4px"},onClick:()=>(e=>{x(e),setTimeout(()=>{const n=document.getElementById(`mega-menu-solutions-item-${e}`);n&&n.scrollIntoView({behavior:"smooth",block:"center"})},50)})(n),children:[(0,s.jsxs)("a",{href:e.url,className:"nav__item--mega-menu__submenu-inner--link submenu-inner-link ",onClick:e=>e.preventDefault(),children:[(0,s.jsx)("div",{className:"nav__item--mega-menu__submenu-inner--icon",children:(0,s.jsx)(t.MediaUploadCheck,{children:(0,s.jsx)(t.MediaUpload,{onSelect:e=>p(n,"icon",e.url),allowedTypes:["image"],render:({open:n})=>(0,s.jsx)("div",{onClick:n,style:{cursor:"pointer",width:"24px",height:"24px",background:e.icon?"transparent":"#eee",marginRight:"8px"},children:e.icon&&(0,s.jsx)("img",{src:e.icon,alt:""})})})})}),(0,s.jsx)(t.RichText,{tagName:"div",className:"nav__item--mega-menu__submenu-inner--link-title body2-medium",value:e.label,onChange:e=>p(n,"label",e)})]}),(0,s.jsx)("div",{style:{marginTop:"5px",paddingLeft:"32px"},children:(0,s.jsx)(l.TextControl,{value:e.url,onChange:e=>p(n,"url",e),placeholder:(0,i.__)("URL","ambrygen-web"),onClick:e=>e.stopPropagation()})}),(0,s.jsx)(l.Tooltip,{text:"Remove Item",children:(0,s.jsx)(l.Button,{icon:m,onClick:e=>{e.stopPropagation(),v(n)},className:"remove-link-btn",style:{position:"absolute",right:-30,top:5,color:"red"},disabled:h.length<=1})})]},n))}),(0,s.jsx)(l.Button,{variant:"secondary",icon:d,onClick:b,children:(0,i.__)("Add Item","ambrygen-web")})]})})}),(0,s.jsx)("div",{className:"nav__item--mega-menu__cl-right",children:(0,s.jsxs)("div",{className:"nav__item--mega-menu__category-submenu-row",children:[h.length>0&&(0,s.jsxs)("div",{className:"nav__item--mega-menu__category-submenu-lists category-submenu-lists",children:[(0,s.jsx)("div",{className:"nav__item--mega-menu__category-submenu-lists--image",children:(0,s.jsx)("figure",{style:{minHeight:"200px",background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center"},children:w.image?(0,s.jsx)("img",{src:w.image,alt:""}):(0,s.jsx)("span",{style:{color:"#999",fontSize:"12px"},children:(0,i.__)("No image set - use sidebar to upload","ambrygen-web")})})}),(0,s.jsxs)("div",{className:"cat-submenu-link",children:[(0,s.jsx)(t.RichText,{tagName:"div",className:"body2-medium mb-0 nav__item--mega-menu__link-title",value:w.rightTitle,onChange:e=>p(u,"rightTitle",e),placeholder:(0,i.__)("Right Side Title","ambrygen-web")}),(0,s.jsx)("div",{className:"nav__item--mega-menu__links--icon"})]}),(0,s.jsx)("div",{style:{margin:"10px 0"},children:(0,s.jsx)(l.TextControl,{label:(0,i.__)("Right Side URL","ambrygen-web"),value:w.rightUrl||"",onChange:e=>p(u,"rightUrl",e),placeholder:"https://..."})}),(0,s.jsx)(t.RichText,{tagName:"p",className:"nav__item--mega-menu__info caption-regular",value:w.rightText,onChange:e=>p(u,"rightText",e),placeholder:(0,i.__)("Right Side Description","ambrygen-web")})]}),0===h.length&&(0,s.jsx)("p",{children:(0,i.__)("Add an item on the left to configure right-side content.","ambrygen-web")})]})})]})]})},save:()=>null})})();