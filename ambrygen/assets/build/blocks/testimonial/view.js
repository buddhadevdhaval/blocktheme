document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".testimonial-block-frontend").forEach(e=>{const t=e.dataset.testimonials?.split(",").map(Number).filter(Boolean);t?.length?fetch(`/wp-json/wp/v2/testimonial?include=${t.join(",")}&_embed=1`).then(e=>{if(!e.ok)throw new Error(`HTTP ${e.status}`);return e.json()}).then(t=>{Array.isArray(t)&&0!==t.length?e.innerHTML=t.map(e=>{const t=e.title?.rendered||e.title?.raw||`Testimonial ${e.id}`,n=e.excerpt?.rendered||e.excerpt?.raw||e.content?.rendered?.substring(0,100)||"No description available.",i=e._embedded?.["wp:featuredmedia"]?.[0],r=e._embedded?.author?.[0];return`\n                            <div class="testimonial-card">\n                                ${i?`\n                                    <img src="${i.source_url}" \n                                         alt="${i.alt_text||t}" \n                                         width="60" height="60" />\n                                `:""}\n                                <h4>${t}</h4>\n                                <div class="testimonial-excerpt">${n}</div>\n                                ${r?`<p class="testimonial-author">- ${r.name}</p>`:""}\n                            </div>\n                        `}).join(""):e.innerHTML='<p class="no-testimonials">No testimonials found.</p>'}).catch(()=>{e.innerHTML='<p class="error-msg">Error loading testimonials.</p>'}):e.innerHTML='<p class="no-testimonials">No testimonials selected.</p>'})});